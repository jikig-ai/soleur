# UX Design Lead Agent + Pencil MCP Integration

**Date:** 2026-02-14
**Status:** Captured
**Participants:** Jean, Claude

## What We're Building

Three things bundled into one feature:

1. **Commit missing PR #82 artifacts** -- The .pen design file at `knowledge-base/design/brand/` was left untracked when PR #82 merged. Also gitignore `.playwright-mcp/` as ephemeral session data.

2. **Bundle Pencil MCP server in the plugin** -- Add the pencil.dev MCP server to `plugin.json` alongside the existing `context7` server, giving all Soleur users access to .pen file design tools.

3. **New `ux-design-lead` agent** -- A full UX workflow agent under `agents/design/` that handles wireframes, visual design, and design systems using Pencil (.pen files). This replaces the visual design responsibilities previously handled ad-hoc by the brand-architect.

## Why This Approach

- **Separation of concerns:** brand-architect stays focused on text-based brand identity (voice, tone, positioning). ux-design-lead handles all visual design work in .pen files. Clear ownership.
- **Chained workflow:** brand-architect produces the brand guide, then optionally hands off to ux-design-lead for visual exploration. This mirrors how real teams work (brand strategist -> designer).
- **Bundled MCP:** Making pencil a first-class MCP server means design capabilities are available out of the box, not an optional extra users have to discover and configure.
- **Top-level domain:** `agents/design/` as a new top-level domain (like `marketing/`, `research/`) reflects that design is cross-cutting, not strictly engineering or marketing.

## Key Decisions

1. **Agent name:** `ux-design-lead` -- conveys the full UX workflow scope without overlapping brand-architect (brand identity) or frontend-design skill (code generation).

2. **Location:** `agents/design/ux-design-lead.md` -- new top-level `design/` domain under agents.

3. **Pencil MCP:** Bundled in `plugin.json` mcpServers, same as context7. Available to all users automatically.

4. **Brand routing chain:** brainstorm's brand routing calls brand-architect first, then offers to chain to ux-design-lead for visual exploration in .pen files.

5. **.pen file convention:** Files organized by domain under `knowledge-base/design/{domain}/` (e.g., `design/brand/`, `design/onboarding/`, `design/dashboard/`). Convention added to constitution.

6. **.playwright-mcp/:** Added to .gitignore as ephemeral session artifacts.

## Open Questions

- What specific Pencil MCP operations should the ux-design-lead agent know how to use? (get_guidelines, get_style_guide, batch_design, get_screenshot for validation?)
- Should the agent auto-detect existing brand-guide.md and use it for color/typography decisions?
- How does the ux-design-lead interact with the existing frontend-design skill? (Design in .pen -> generate code from .pen?)
- Should we define .pen file naming conventions beyond the directory structure?

## Scope

### In Scope
- New `ux-design-lead` agent with .pen file design capabilities
- Pencil MCP server in plugin.json
- .pen directory convention in constitution
- .gitignore update for .playwright-mcp/
- Commit existing .pen file from PR #82
- Update brainstorm command to chain brand-architect -> ux-design-lead

### Out of Scope
- Modifying brand-architect's core functionality
- Code generation from .pen files (that's frontend-design's job)
- Design system creation (future enhancement)
- Automated design review agent
