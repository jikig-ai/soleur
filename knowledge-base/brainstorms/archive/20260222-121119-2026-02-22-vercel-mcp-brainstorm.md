# Brainstorm: Integrate Vercel MCP

**Date:** 2026-02-22
**Issue:** #258
**Status:** Ready for planning

## What We're Building

Add the Vercel MCP server to Soleur's plugin.json, giving all agents access to Vercel platform tools -- deployments, project management, build logs, runtime logs, domain management, and documentation search.

This is the same integration pattern used for Context7: a single HTTP entry in plugin.json's `mcpServers` block. Vercel MCP uses OAuth (handled natively by Claude Code) rather than header-based auth, so it can be bundled despite the prior MCP audit's constraint on authenticated servers.

## Why This Approach

**Plugin-level integration (plugin.json)** was chosen over a setup skill or docs-only approach because:

- Matches the existing Context7 pattern -- consistency in how Soleur distributes MCP servers
- OAuth is handled natively by Claude Code on first use; no manual token management
- Tools become available to all agents automatically through MCP discovery
- Minimal implementation surface: one JSON entry + README update

**No agent instruction updates** at this stage because:

- MCP tools are self-descriptive; agents discover and use them without explicit routing
- Updating agent instructions now would be speculative (no real usage data)
- The existing deploy skill clearly targets Docker/SSH; Vercel MCP tools are unambiguously named (`deploy_to_vercel`, `list_deployments`)
- If routing confusion emerges later, targeted instructions can be added informed by actual usage

## Key Decisions

- **Distribution:** Plugin-level via plugin.json (same as Context7)
- **Scope:** Full platform access (~13 tools: docs, projects, deployments, domains, CLI)
- **Agent updates:** None -- agents discover MCP tools naturally
- **Deploy coexistence:** Existing Docker/SSH deploy skill unchanged; Vercel MCP adds a parallel deployment path
- **Auth model:** OAuth (Claude Code native) -- no headers needed in plugin.json

## CTO Assessment Summary

The CTO flagged three concerns:

1. **Forced OAuth for all users** -- Non-Vercel users will see an OAuth prompt or unauthenticated tools. Accepted trade-off: matches Context7 pattern, and unauthenticated users still get `search_documentation`.
2. **Financial tool exposure** -- `buy_domain` can spend real money. Mitigated by Claude Code's human confirmation flow.
3. **Deployment path ambiguity** -- Two deploy paths now exist. Accepted: tools are self-descriptive, no agent routing changes needed yet.

## Vercel MCP Tools Reference

| Category | Tools | Auth Required |
|----------|-------|---------------|
| Documentation | `search_documentation` | No |
| Project Mgmt | `list_teams`, `list_projects`, `get_project` | Yes |
| Deployments | `list_deployments`, `get_deployment`, `get_deployment_build_logs`, `get_runtime_logs` | Yes |
| Domains | `check_domain_availability_and_price`, `buy_domain` | Yes |
| Access | `get_access_to_vercel_url`, `web_fetch_vercel_url` | Yes |
| CLI | `use_vercel_cli`, `deploy_to_vercel` | Yes |

## Open Questions

- How does Claude Code handle OAuth for plugin-bundled MCP servers on first use? Need to verify the flow doesn't break for non-Vercel users.
- Should the Vercel MCP URL be generic (`https://mcp.vercel.com`) or support project-scoped URLs (`https://mcp.vercel.com/<team>/<project>`)? Starting with generic.

## Prior Art

- **MCP audit (issue #116):** Concluded authenticated servers can't bundle due to header auth constraint. Vercel's OAuth model is different -- Claude Code handles it natively.
- **Context7 integration:** Unauthenticated HTTP MCP bundled in plugin.json. Vercel follows same pattern but with OAuth layer.
- **Pencil/Playwright:** stdio MCP servers installed as IDE extensions. Different pattern; not applicable here.
