# Spec: Compound Should Update Skills and Agents with Learnings

**Date:** 2026-02-17
**Issue:** #104
**Branch:** feat-compound-skill-updates

## Problem Statement

When `/soleur:compound` captures a learning (e.g., "the ship skill forgot to stage non-code files"), the insight is stored in `knowledge-base/learnings/` and optionally promoted to the constitution. But the ship skill's SKILL.md -- the instructions that directly govern its behavior -- never gets updated. This means the skill can repeat the same mistake in the next session.

## Goals

- G1: Compound proposes targeted edits to skill/agent/command definitions based on captured learnings

## Non-Goals

- Fully automatic edits without user confirmation
- Replacing the constitution entirely (project-wide rules still belong there)
- Restructuring skill/agent definition formats
- Real-time monitoring of skill/agent behavior during execution
- Constitution cross-check (separate issue)
- Sync broad-scan learnings-to-definitions matching (separate issue)

## Functional Requirements

- FR1: After capturing a learning, compound detects which skill/agent/command was active in the session
- FR2: Compound proposes a one-line bullet edit to the relevant section of the target definition file
- FR3: The user can Accept, Skip, or Edit the proposed change
- FR4: Routing skips gracefully when no plugin directory or active components are detected

## Technical Requirements

- TR1: Detection uses conversation context (the LLM reads its own history)
- TR2: Edits are appended to existing sections, not new sections
- TR3: The "sharp edges only" principle is enforced by the user confirmation gate
- TR4: All proposed edits are shown with section context before confirmation
- TR5: Edits are not committed or version-bumped by compound -- staged for workflow completion protocol
