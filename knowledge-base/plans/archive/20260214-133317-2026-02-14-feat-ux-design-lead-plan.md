---
title: UX Design Lead Agent + Pencil MCP Integration
type: feat
date: 2026-02-14
---

# UX Design Lead Agent + Pencil MCP Integration

[Updated 2026-02-14 after plan review -- simplified from 5 phases to 2, agent workflow from 6 steps to 3]

## Overview

Add a `ux-design-lead` agent that creates visual designs in .pen files using Pencil MCP tools. Also commit missing PR #82 artifacts and add a minimal handoff suggestion in the brainstorm command.

## Problem Statement

Soleur has no dedicated agent for visual design work. The brand-architect handles text-based brand identity. The frontend-design skill generates code. There is a gap between brand strategy and code where visual design exploration should happen. PR #82 left .pen design files and playwright session data untracked.

## Proposed Solution

### Phase 1: Agent + Housekeeping

**1.1 Create agent file**

File: `plugins/soleur/agents/design/ux-design-lead.md`

New top-level `design/` domain directory. The plugin loader discovers agents recursively -- no config changes needed. Target size: ~50-60 lines (comparable to ddd-architect at 95 lines, but sharper).

**Frontmatter:**

```yaml
---
name: ux-design-lead
description: "Use this agent when you need to create visual designs in .pen files using Pencil MCP tools. It handles wireframes, high-fidelity screens, and component design, optionally using brand-guide.md for design tokens. <example>Context: The user wants to create a landing page wireframe after defining their brand identity.\nuser: \"I want to create a visual design for the landing page based on our brand guide.\"\nassistant: \"I'll use the ux-design-lead agent to create a .pen design using the brand tokens from your brand guide.\"\n<commentary>\nThe user wants visual design artifacts (.pen files), not code. The ux-design-lead handles Pencil MCP design work.\n</commentary>\n</example>\n\n<example>\nContext: The user wants to explore screen layouts for a new feature.\nuser: \"Design the onboarding flow screens -- I need wireframes for the 3-step signup.\"\nassistant: \"I'll launch the ux-design-lead agent to create wireframe designs in .pen format.\"\n<commentary>\nScreen design and wireframing in .pen files is the core use case for ux-design-lead.\n</commentary>\n</example>"
model: inherit
---
```

**Agent workflow (3 steps, sharp edges only):**

1. **Design Brief** -- Check if `knowledge-base/overview/brand-guide.md` exists. If found, read `## Visual Direction` and extract color palette, typography, and style as primary design constraints. Use AskUserQuestion to clarify:
   - **Scope:** Single screen / Multi-screen flow / Component
   - **Platform:** Desktop / Mobile / Both
   - **Fidelity:** Wireframe / High-fidelity

2. **Design** -- Call `get_style_guide_tags` + `get_style_guide(tags)` for inspiration. Call `get_guidelines(topic)` for the design type (landing-page, design-system, table). Use `open_document` to create or open a .pen file. Iterative loop: `batch_design` to build, `get_screenshot` to check, adjust until correct. Use `snapshot_layout(problemsOnly=true)` to catch layout issues.

3. **Deliver** -- Present final `get_screenshot` to user. Save .pen file to `knowledge-base/design/{domain}/{descriptive-name}.pen` (e.g., `design/brand/landing-page.pen`, `design/onboarding/signup-flow.pen`). Announce file location.

**Graceful degradation:** If Pencil MCP tools are unavailable, inform the user that the Pencil extension (VS Code/Cursor) is required and stop. Link: https://docs.pencil.dev/getting-started/installation

**1.2 Housekeeping (included in same commit)**

- Add `.playwright-mcp/` to `.gitignore`
- Stage `knowledge-base/design/brand/brand-visual-identity-brainstorm.pen` for tracking

**1.3 Minimal brainstorm handoff**

File: `plugins/soleur/commands/soleur/brainstorm.md`

In Phase 4 (Handoff) AskUserQuestion options, add one option: "Create visual designs -- Run ux-design-lead agent for .pen file design". This is a suggestion, not a routing block. No changes to Phase 0.5 brand routing.

### Phase 2: Version Bump + Documentation

**Version:** MINOR bump (2.7.0 -> 2.8.0) -- new agent + new domain directory.

Update atomically:
1. `plugins/soleur/.claude-plugin/plugin.json` -- version to 2.8.0, update description (24 -> 25 agents)
2. `plugins/soleur/CHANGELOG.md` -- new `## [2.8.0]` entry
3. `plugins/soleur/README.md`:
   - Agent count 24 -> 25 in components table
   - Add `### Design (1)` section under Agents with ux-design-lead row
   - Add Pencil as optional dependency note (one line: "The `ux-design-lead` agent requires the [Pencil extension](https://docs.pencil.dev/getting-started/installation) installed in VS Code or Cursor.")
4. Root `README.md` -- version badge if present
5. `.github/ISSUE_TEMPLATE/bug_report.yml` -- version placeholder if present
6. `plugins/soleur/docs/pages/agents.html` -- add Design category with ux-design-lead
7. Grep HTML docs for hardcoded version strings and update

## Non-Goals

- Modifying brand-architect's core workflow
- Generating code from .pen designs (frontend-design skill's job)
- Full design system creation
- Adding .pen convention to constitution (deferred until enforcement exists)
- Full brainstorm routing block for design (v2 if users request it)

## Acceptance Criteria

- [x] `plugins/soleur/agents/design/ux-design-lead.md` exists with frontmatter (2+ examples), 3-step workflow
- [x] Agent reads brand-guide.md `## Visual Direction` when available
- [x] Agent warns and stops when Pencil MCP is unavailable
- [x] Brainstorm Phase 4 includes ux-design-lead as a handoff option
- [x] `.playwright-mcp/` in .gitignore, .pen file tracked
- [x] Version bump to 2.8.0 across plugin.json, CHANGELOG.md, README.md

## Test Scenarios

- Given Pencil MCP is available and brand-guide.md exists, when ux-design-lead is invoked with "create a landing page wireframe", then it reads brand tokens and creates a .pen file in `knowledge-base/design/`
- Given Pencil MCP is NOT available, when ux-design-lead is invoked, then it warns the user to install the Pencil extension and stops
- Given the .gitignore is updated, when `.playwright-mcp/` files are created during a session, then they are not tracked by git

## Dependencies & Risks

- **Pencil MCP availability:** Agent requires Pencil extension. Mitigated by clear error message.
- **Brand guide format:** Depends on exact `## Visual Direction` heading. Already enforced by brand-architect's contract.
- **Plugin loader:** New `agents/design/` directory should auto-discover. Verify empirically.

## References

- Brainstorm: `knowledge-base/brainstorms/2026-02-14-ux-design-lead-brainstorm.md`
- Spec: `knowledge-base/specs/feat-ux-design-lead/spec.md`
- Issue: #87
- Brand-architect pattern: `plugins/soleur/agents/marketing/brand-architect.md`
- DDD-architect pattern: `plugins/soleur/agents/engineering/design/ddd-architect.md`
- Pencil docs: https://docs.pencil.dev/getting-started/installation
- Learning - agent prompts: `knowledge-base/learnings/agent-prompt-sharp-edges-only.md`
